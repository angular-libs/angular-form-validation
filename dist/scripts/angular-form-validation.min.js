"use strict";!function(){angular.module("formValidation",[]);var a=["$log",function(a){function b(){return{field:"",validation:"",code:"",message:""}}return{restrict:"E",require:["^formValidation"],link:function(a,c,d,e){var f,g;g=angular.extend(b(),{field:d.field,validation:d.validation,code:d.code,message:d.message}),f=e[0],f.addValidationMessage(g)}}}],b=["$log","$timeout",function(a,b){return{restrict:"A",require:["form","formValidation"],controller:["$scope",function(a){var b,c;c=[],this.setFormName=function(a){b=a},this.addValidationMessage=function(a){c.push(a)},this.getValidationMessage=function(){return c},this.getFormValidations=function(a,b){for(var d=[],e=0;e<c.length;e++){var f=c[e].validation;if(a[f])for(var g=0;g<a[f].length;g++)if(a[f][g].$name==c[e].field&&(d.push(c[e].code?c[e].code:c[e].message),!b))return d}return d}}],link:function(c,d,e,f){var g,h;return g=f[0],h=f[1],d.on("submit",function(){return g.$invalid?(g.formValidations=h.getFormValidations(g.$error,e.multiple),b(function(){c.$apply()}),!1):void(g.formValidations=void 0)}),g.$name?void h.setFormName(g.$name):void a.error("form name is required",d)}}}],c=["$log","$timeout",function(a,b){function c(){var a="";return a+='<div class="alert alert-danger alert-dismissible" role="alert"  ng-show="isHidden()" >',a+='<button type="button" class="close"  aria-label="Close" ng-click="hide()"><span aria-hidden="true">&times;</span></button>',a+=' <p ng-repeat="msg in form.formValidations" ng-bind="msg"></p>',a+="</div>"}return{restrict:"E",template:c(),require:"^?form",scope:{},replace:!0,link:function(c,d,e,f){function g(){e.serverError&&!j&&($("."+e.serverError).hide(),j=!0)}var h,i,j;return(h=f?f.$name:e.name)?(i=!1,j=!1,c.isHidden=function(){return i},c.hide=function(){i=!1},void b(function(){c.form=c.$parent[h],c.$watch(function(){return c.$parent[h].formValidations},function(a){a?(g(),i=!0):i=!1})},1e3)):void a.error("form name required!!",d)}}}];angular.module("formValidation").directive("validationMessage",a),angular.module("formValidation").directive("formValidation",b),angular.module("formValidation").directive("formError",c)}();