"use strict";!function(){function a(b,c){if("undefined"==typeof b)return!1;var d=c.indexOf(".");return d>-1?a(b[c.substring(0,d)],c.substr(d+1)):b[c]}var b=function(){function a(a){a&&(c=a)}var b,c;c={},this.setErrorCodeUrl=function(a){b=a},this.$get=["$http","$log","$q",function(d,e,f){var g,h;return h=f.defer(),g={},b?d.get(b).then(function(b){a(b.data),h.resolve(c)},function(a){h.reslove(c),e.error("error while loading error codes",a)}):h.resolve(c),g.initMessage=function(a){h.promise.then(function(b){a.message||(a.message=b[a.code]?b[a.code]:a.code)})},g}]},c=["$log",function(a){function b(){return{field:"",validation:"",code:"",message:""}}return{restrict:"E",require:["^formValidation"],link:function(a,c,d,e){var f,g;g=angular.extend(b(),{field:d.field,validation:d.validation,code:d.code,message:d.message}),f=e[0],f.addValidationMessage(g)}}}],d=["$log","$timeout","errorCode",function(b,c,d){return{restrict:"A",require:["form","formValidation"],controller:["$scope",function(a){var b,c;c=[],this.setFormName=function(a){b=a},this.addValidationMessage=function(a){d.initMessage(a),c.push(a)},this.getValidationMessage=function(){return c},this.getFormValidations=function(a,b){for(var d=[],e=0;e<c.length;e++){var f=c[e].validation;if(a[f])for(var g=0;g<a[f].length;g++)if(a[f][g].$name==c[e].field&&(d.push(c[e].message),!b))return d}return d}}],link:function(d,e,f,g){var h,i;return h=g[0],h.$_validate=function(){var b=Object.keys(h).filter(function(a){return 0!=a.indexOf("$")});return angular.forEach(b,function(b){var c=a(h,b);c&&c.$validate&&c.$validate()}),h.$invalid?(h.formValidations=i.getFormValidations(h.$error,f.multiple),c(function(){d.$apply()}),!1):(h.formValidations=void 0,!0)},i=g[1],e.on("submit",function(){return h.$invalid?(h.formValidations=i.getFormValidations(h.$error,f.multiple),c(function(){d.$apply()}),!1):void(h.formValidations=void 0)}),h.$name?void i.setFormName(h.$name):void b.error("form name is required",e)}}}],e=["$log","$timeout",function(a,b){function c(){var a="";return a+='<div class="alert alert-danger alert-dismissible" role="alert"  ng-show="isHidden()" >',a+='<button type="button" class="close"  aria-label="Close" ng-click="hide()"><span aria-hidden="true">&times;</span></button>',a+=' <p ng-repeat="msg in form.formValidations" ng-bind="msg"></p>',a+="</div>"}return{restrict:"E",template:c(),require:"^?form",scope:{},replace:!0,link:function(c,d,e,f){function g(){e.serverError&&!j&&($("."+e.serverError).hide(),j=!0)}var h,i,j;return(h=f?f.$name:e.name)?(i=!1,j=!1,c.isHidden=function(){return i},c.hide=function(){i=!1},void b(function(){c.form=c.$parent[h],c.$watch(function(){return c.$parent[h].formValidations},function(a){a?(g(),i=!0):i=!1})},1e3)):void a.error("form name required!!",d)}}}];angular.module("formValidation",[]),angular.module("formValidation").provider("errorCode",b),angular.module("formValidation").directive("validationMessage",c),angular.module("formValidation").directive("formValidation",d),angular.module("formValidation").directive("formError",e)}();